<mat-button-toggle-group
  value="all"
  name="filterType"
  aria-label="Filter type"
  (change)="newType($event)"
  >
  <mat-button-toggle value="all">All</mat-button-toggle>
  <mat-button-toggle value="done">Ready</mat-button-toggle>
</mat-button-toggle-group>

@for (record of recordings$ | async; track record) {
  <mat-card class="card">
    <mat-card-header>
      <mat-card-title-group>
        <mat-card-title>{{ record.name }} </mat-card-title>
        <mat-card-subtitle
          >{{ record.startTime | date : 'medium' }}
        </mat-card-subtitle>
        @if (record.playback.format.preview) {
          <img
            mat-card-sm-image
            [src]="record.playback.format.preview.images.image[0]"
            />
        }
      </mat-card-title-group>
    </mat-card-header>
    <mat-card-content>
      <p><span>Duration:</span> {{ record | loquiHowLong }}</p>
      <p><span>Participants:</span> {{ record.participants }}</p>
      <p><span>Size:</span> {{ record.size * 0.000001 | number : '1.0-1' }}MB</p>
      <mat-divider></mat-divider>
    </mat-card-content>
    <mat-card-actions>
      <a target="_blank" [href]="record.playback.format.url" mat-button
        >Go to BBB</a
        >
        @if (record.appState === 'none') {
          <button (click)="initFetch(record.recordID)" mat-button>Fetch</button>
        }
        @if (record.appState === 'inprogress') {
          <mat-spinner [diameter]="25"></mat-spinner>
        }
        @if (record.appState === 'done') {
          <a mat-button [routerLink]="['record', record.recordID]">Detail</a>
        }
      </mat-card-actions>
    </mat-card>
  }
