@if (recordQuery.isPending()) {
<p>Loading...</p>
} @if (recordQuery.error()) {
<p>An error has occurred: {{ recordQuery.error() }}</p>
} @if (recordQuery.data(); as record) {
<mat-card>
  <mat-card-header>
    <mat-card-title-group>
      <mat-card-title>{{ record.name }} </mat-card-title>
      <mat-card-subtitle>{{ record | loquiHowLong }} </mat-card-subtitle>
    </mat-card-title-group>
  </mat-card-header>
  <mat-card-content>
    <p><span>Duration:</span> {{ record | loquiDuration }}</p>
    <p><span>Speakers:</span> {{ record.speakers.length }}</p>
  </mat-card-content>
</mat-card>
<div class="video" #videoElm>
  <video
    controls
    [src]="baseUrl + record.video"
    (timeupdate)="timeUpdate($event)"
    (loadstart)="initVideo()"
  ></video>
</div>
<!-- @if (speakers$ | async; as speakers) {
  @if (whisper$ | async; as whisper) {
    @if(speakers.length && whisper) {
<loqui-record-text
  (selectTime)="selectTime($event)"
  [whisper]="whisper"
  [speakers]="speakers"
  [time]="videoTime"
></loqui-record-text>
}
<loqui-speakers
  [speakers]="speakers"
  [record]="record.id"
></loqui-speakers>
} } -->

@if (textQuery.data(); as text) {
<loqui-record-text
  (selectTime)="selectTime($event)"
  [whisper]="text"
  [speakers]="record.speakers"
  [time]="videoTime"
></loqui-record-text>
} }
